<html>
  <head>
    <title>prime</title>
    <script src="/primus/primus.js"></script>
    <script>

      var primus = new Primus({
        // mirage: 'foo'
      });

      // substreams do not work with events
      var chat = primus.substream('chat');

      chat.on('data', function (data) {
        chat.write({text: 'client answer'});
      });

      primus.on('mirage', function (id) {
        // console.log('got id:', id);
      });

      primus.on('start', function (data) {
        // console.log('start', data);
        primus.emit('move', 'south');
      });

      primus.on('data', function (data) {
        // console.log(data);
        primus.write({status: 'ready'});
        primus.write('invalid string!');
      });
    </script>
  </head>
  <body>
  </body>
</html>
